from typing import List, Dict

class KeywordFilterService:
    def __init__(self):
        self.important_keywords = [
            "ê°€ìƒìì‚°", "ê°ì‚¬ë³´ê³ ì„œ", "ê°•í™”", "ê°•ì„¸", "ê°œìµœ", "ê±°ë˜", "ê±°ì§“", "ê²Œì„ ë§¤ì¶œ", "ê²°ê³¼", "ê²°ì˜", "ê²°ì •", "ê³„ì•½", "ê³„ì•½ ì²´ê²°", "ê³µê°œ",
            "ê³µë§¤ë„", "ê³µì‹œ", "ê¸°ìˆ ", "ê¸°ë¡", "ê·œíƒ„", "ê°±ì‹ ", "ê¸°ê°", "ê¸‰ë“±",
            "ëˆ„ì ", "ë‹¨í–‰", "ë‹¬ì„±", "ëŒ€ë¹„", "ëŒ€í‘œì´ì‚¬", "ëŒíŒŒ", "ë¡ ì¹­",
            "ë§¤ì…", "ë§¤ì¶œ", "ë§¤ì¶œì•¡", "ë§¤ìˆ˜ì„¸", "ë¯¸ê³µê°œ",
            "ë©”íƒ€ë²„ìŠ¤", "ë°œí–‰", "ë² íƒ€", "ë³€ë™", "ë¶€ì§„", "ë¶ë¯¸", "ë¶„ê¸°", "ë²•ì  ëŒ€ì‘", "ë²•ì ",
            "ë¸”ë¡ì²´ì¸", "ë¹„ìš©", "ì‚¬ì—…", "ì‚¬ì™¸ì´ì‚¬", "ì‚¬ì „", "ì‚¬ì „ ì˜ˆì•½", "ì‚¬ì „ì˜ˆì•½", "ìƒì¥", "ìƒì¥íì§€", "ìƒìŠ¹ ë§ˆê°",
            "ìƒí–¥", "ìƒí–¥ ì¡°ì •", "ì„ ì„", "ì„ ì •", "ì„¤ë¦½", "ì†Œê°", "ì†Œì†¡", "ì†Œì§‘", "ìˆ˜í˜œ",
            "ìˆœì†ì‹¤", "ì‹ ê·œ", "ì‹ ì‘",
            "ì‹¤ì ", "ì‹¤ì ë°œí‘œ", "ì—…ë°ì´íŠ¸", "ì˜ì—…ì†ì‹¤", "ì˜ì—…ì´ìµ", "ì˜ˆì•½", "ì˜ˆì •", "ì˜ˆê³ ", "ì˜¤í”ˆ", "ì˜¨ë¼ì¸", "ì˜¨ë³´ë”©",
            "ì™„ë£Œ", "ìœ„ë¯¹ìŠ¤", "ìœ ìƒì¦ì", "ìœ ì§€", "ì´ìƒ", "ì¸ê±´ë¹„", "ì¸ìˆ˜", "ìê¸°ì£¼ì‹",
            "ìì‚¬ì£¼", "ìë³¸", "ìë³¸ ì ì‹", "ì ìì „í™˜", "ì „ëµ", "ì „í™˜", "ì¥ì¤‘", "ì ì‹",
            "ì •ê¸°ì£¼ì£¼ì´íšŒ", "ì •ì‹", "ì œì¶œ", "ì¡°ì •", "ì¢…ê°€", "ì£¼ë‹¹", "ì£¼ì‹íšŒì‚¬", "ì£¼ìš”", "ì£¼ì£¼ì´íšŒ", "ì£¼ì´", "ì¤‘êµ­",
            "ì¦ê°€", "ì§€ê¸‰", "ì§€ë¶„", "ì§€ì†", "ì§€ì†ê°€ëŠ¥ê²½ì˜ë³´ê³ ì„œ", "ì°¸ê°€",
            "ì°¸ì—¬", "ì²˜ë¶„", "ì²´ê²°", "ìµœëŒ€", "ìµœì´ˆ", "ì¶”ì§„", "ì¶œì‹œ", "ì·¨ë“", "í…ŒìŠ¤íŠ¸",
            "íˆ¬ì", "íˆ¬ì ë‹¨í–‰", "íŒŒíŠ¸ë„ˆì‹­", "íŒŒíŠ¸ë„ˆì‹­ ì²´ê²°", "íŒí˜¸", "í¼ë¸”ë¦¬ì‹±", "í¼ë¸”ë¦¬ì‹± ê³„ì•½",
            "í•œí•œë ¹", "í•­ì†Œ", "í•­ê³ ", "í•˜í–¥", "í•˜ë½", "í•©ë³‘", "í˜„ê¸ˆë°°ë‹¹", "í˜‘ë ¥", "í˜‘ì•½", "í˜‘ì•½ ì²´ê²°", "í™•ëŒ€", "í™•ì¥",
            "íšë“", "í‘ìì „í™˜", "í¥í–‰", 
            "ESG", "%", "DLC", "1ìœ„", "ai", "cbt", "ip", "mou", "nft"
        ]
    
    def filter_by_keywords(self, news_list: List[Dict]) -> List[Dict]:
        """
        í‚¤ì›Œë“œ ê¸°ë°˜ 1ì°¨ í•„í„°ë§
        """
        print(f"ğŸ¤3-2 í‚¤ì›Œë“œ í•„í„° ì„œë¹„ìŠ¤ ì§„ì… - ì´ {len(news_list)}ê°œ ë‰´ìŠ¤")
        
        filtered_news = []
        
        for news in news_list:
            title = news.get("title", "").lower()
            
            # í‚¤ì›Œë“œ ë§¤ì¹­ í™•ì¸
            has_keyword = False
            matched_keywords = []
            
            for keyword in self.important_keywords:
                if keyword.lower() in title:
                    has_keyword = True
                    matched_keywords.append(keyword)
            
            if has_keyword:
                news["matched_keywords"] = matched_keywords
                filtered_news.append(news)
        
        print(f"âœ… í‚¤ì›Œë“œ í•„í„°ë§ ì™„ë£Œ: {len(filtered_news)}ê°œ ë‰´ìŠ¤ í†µê³¼")
        return filtered_news

# ì‹±ê¸€í†¤ ì¸ìŠ¤í„´ìŠ¤
keyword_filter_service = KeywordFilterService() 